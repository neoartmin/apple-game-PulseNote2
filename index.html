<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0, minimum-scale=1.0">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#000000">
    <meta name="msapplication-navbutton-color" content="#000000">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>사과 숫자 퍼즐</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* 추가 팝업 차단 스타일 */
        html, body {
            -webkit-overflow-scrolling: touch !important;
            overscroll-behavior: none !important;
            -ms-overflow-style: none !important;
            scrollbar-width: none !important;
            position: fixed !important;
            width: 100% !important;
            height: 100% !important;
            overflow: hidden !important;
            top: 0 !important;
            left: 0 !important;
            right: 0 !important;
            bottom: 0 !important;
            margin: 0 !important;
            padding: 0 !important;
        }
        
        html::-webkit-scrollbar, body::-webkit-scrollbar {
            display: none !important;
        }
        
        /* 모든 요소에서 스크롤 차단 */
        *, *::before, *::after {
            overscroll-behavior: none !important;
            -webkit-overflow-scrolling: touch !important;
        }
        
        /* 뷰포트 메타 태그 강화 */
        @viewport {
            width: device-width;
            initial-scale: 1.0;
            maximum-scale: 1.0;
            user-scalable: no;
        }
        
        /* 모든 가능한 스크롤 요소 차단 */
        div, section, article, main, aside, nav, header, footer {
            overflow: hidden !important;
            overscroll-behavior: none !important;
        }
    </style>
</head>
<body>
    <!-- 인트로 화면 -->
    <div id="introScreen" class="intro-screen">
        <div class="intro-container">
            <div class="intro-title">
                🍎 사과 숫자 퍼즐
            </div>
            
            <div class="intro-buttons">
                <button type="button" class="intro-btn" onclick="showSettings()">⚙️ 설정</button>
                <button type="button" class="intro-btn" onclick="startGame()">🎮 시작</button>
            </div>
        </div>
    </div>

    <!-- 설정 화면 -->
    <div id="settingsScreen" class="settings-screen">
        <div class="settings-container">
            <div class="settings-title">⚙️ 게임 설정</div>
            
            <div class="settings-group">
                <label for="gameTimeSlider">게임 제한 시간: <span id="gameTimeValue">60</span>초</label>
                <input type="range" id="gameTimeSlider" min="30" max="120" value="60" oninput="updateGameTime(this.value)">
                <div class="slider-labels">
                    <span>30초</span>
                    <span>120초</span>
                </div>
            </div>
            
            <div class="settings-group">
                <label for="autoCancelSlider">자동 사과 취소 딜레이: <span id="autoCancelValue">0.7</span>초</label>
                <input type="range" id="autoCancelSlider" min="0.2" max="1.5" step="0.1" value="0.7" oninput="updateAutoCancel(this.value)">
                <div class="slider-labels">
                    <span>0.2초</span>
                    <span>1.5초</span>
                </div>
            </div>
            
            <div class="settings-group">
                <label for="bgMusicToggle">배경음 설정</label>
                <button type="button" id="bgMusicToggle" class="music-toggle-btn" onclick="toggleBackgroundMusic()">
                    🎵 배경음 켜기
                </button>
            </div>
            
            <div class="settings-group">
                <label for="volumeSlider">볼륨: <span id="volumeValue">30</span>%</label>
                <input type="range" id="volumeSlider" min="0" max="100" value="30" oninput="updateVolume(this.value)">
                <div class="slider-labels">
                    <span>0%</span>
                    <span>100%</span>
                </div>
            </div>
            
            <div class="settings-buttons">
                <button type="button" class="settings-btn" onclick="hideSettings()">뒤로</button>
                <button type="button" class="settings-btn primary" onclick="startGameFromSettings()">게임 시작</button>
            </div>
        </div>
    </div>

    <!-- 게임 화면 -->
    <div id="gameScreen" class="game-screen" style="display: none;">
        <div class="game-container">
            <div class="header">
                <div class="title">
                    🍎 사과 숫자 퍼즐
                </div>
                <div class="score-bar">
                    <div class="score">점수: <span id="score">0</span></div>
                    <button type="button" class="intro-btn" onclick="goToIntro()">인트로로</button>
                </div>
            </div>
            
            <div class="game-status">
                <span>상태: <span id="status">playing</span></span>
                <span>시간: <span id="time">0</span>s</span>
                <span>점수: <span id="current-score">0</span></span>
            </div>
            
            <div class="game-grid" id="gameGrid">
                <!-- 15x8 그리드가 여기에 동적으로 생성됩니다 -->
            </div>
            
            <!-- 성공 메시지 표시 영역 -->
            <div id="successMessage" class="success-message"></div>
            
            <div class="game-info">
                <div class="objective">목표: 사과 숫자의 합이 10이 되도록 선택</div>
                <div class="controls">조작법: 사과 클릭으로 선택/해제, Enter로 확인, Space로 초기화</div>
                <div class="scoring">점수 규칙: 선택한 사과 개수 = 점수 (예: 3개로 합 10→3점)</div>
            </div>
        </div>
    </div>
    
    <script src="script.js"></script>
</body>
</html>
